<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="images/favicon.png" type="image/png" />
    <title>Settings | Rainbow</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />

    <link rel="stylesheet" href="/css/settings/settings.css" />
    <link rel="stylesheet" href="/css/common/index.css" />
    <link rel="stylesheet" href="/css/common/data-validation.css" />
    <link rel="stylesheet" href="/css/includes-styles/top-nav.css" />
    <link rel="stylesheet" href="/css/includes-styles/sidebar.css" />
  </head>
  <body>
    <%- include('../includes/top-nav', {user: user}); %>

    <div class="container">
      <div class="row">
        <%- include('../includes/sidebar', {user: user}); %>
        <div class="col-md-10">
          <div class="text-center">
            <h3>Personal Info</h3>
            <p>
              Basic info, like your name and photo, that you use on Google
              services
            </p>
          </div>

          <div class="wrapper">
            <div class="content-header-container">
              <div>
                <h4>Profile</h4>
              </div>
              <div>Some info may be visible to other people.</div>
            </div>
            <hr />
            <div class="row content-wrapper">
              <div class="col">
                <div>Photo</div>
              </div>
              <div class="col">
                <div>A photo helps personalize your account</div>
              </div>
            </div>
            <hr class="content-divider" />

            <!-- Display Name Field -->
            <div
              id="name-wrapper"
              class="row content-wrapper"
              data-toggle="modal"
              data-target="#displayNameForm"
            >
              <div class="col">
                <div>Name</div>
              </div>
              <div class="col">
                <div id="displayNameContainer"><%= user.displayName %></div>
              </div>
            </div>
            <!-- End of Display Name Field -->

            <hr class="content-divider" />

            <!-- Bio Field -->
            <div id="bio-wrapper" class="row content-wrapper" data-toggle="modal" data-target="#bioForm">
              <div class="col">
                <div>Bio</div>
              </div>
              <div class="col">
                <div id="bioContainer">
                  <%= user.bio ? 
                        user.bio.length > 35 ? 
                          user.bio.slice(0, 35) + "..." 
                          : user.bio 
                        : "None"
                  %>
                </div>
              </div>
            </div>
            <!-- End of Bio Field -->

            <hr class="content-divider" />

            <!-- Birthday Field -->
            <div class="row content-wrapper">
              <div class="col">
                <div>Birthday</div>
              </div>
              <div class="col">
                <div><%= user.birthday === null ? "None" : user.birthday %> </div>
              </div>
            </div>
            <!-- End of Birthday Field -->

            <hr class="content-divider" />

            <div class="row content-wrapper">
              <div class="col">
                <div>Gender</div>
              </div>
              <div class="col">
                <div>Female</div>
              </div>
            </div>
            <hr class="content-divider" />
            <div class="row content-wrapper">
              <div class="col">
                <div>Password</div>
              </div>
              <div class="col">
                <div>********</div>
                <div>Last changed Apr 15, 2019</div>
              </div>
            </div>
          </div>

          <div class="wrapper">
            <div class="content-header-container">
              <div>
                <h4>Contact info</h4>
              </div>
            </div>
            <hr />
            <div class="row content-wrapper">
              <div class="col">
                <div>Email</div>
              </div>
              <div class="col">
                <div><%= user.email %></div>
              </div>
            </div>
            <hr class="content-divider" />
            <div class="row content-wrapper">
              <div class="col">
                <div>Phone</div>
              </div>
              <div class="col">
                <div>0667709787</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- -------- Modals -------- -->

    <!-- Change "Display name" modal -->
    <div
      class="modal fade"
      id="displayNameForm"
      tabindex="-1"
      role="dialog"
      aria-labelledby="displayNameFormTitle"
      aria-hidden="true"
      data-backdrop="static"
      data-keyboard="false"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="displayNameTitle">Name</h5>
          </div>
          <div class="modal-body">
            <form id="displayNameForm">
              <div class="form-group">
                <label for="givenNameInput" class="col-form-label">Name:</label>
                <input
                  type="text"
                  class="form-control"
                  id="givenNameInput"
                  value="<%= user.givenName %>"
                />
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small></small>
              </div>
              <div class="form-group">
                <label for="familyNameInput" class="col-form-label"
                  >Last name:</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="familyNameInput"
                  value="<%= user.familyName %>"
                />
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small></small>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              id="closeFormName"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
            <button type="button" id="formNameButton" class="btn btn-primary">
              <span
                class="spinner spinner-border spinner-border-sm"
                role="status"
                aria-hidden="true"
                hidden
              ></span>
              <span class="status-text">Save</span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End of "Change display name" modal -->

    <!-- Change "Change bio" modal -->
    <div
      class="modal fade"
      id="bioForm"
      tabindex="-1"
      role="dialog"
      aria-labelledby="bioFormTitle"
      aria-hidden="true"
      data-backdrop="static"
      data-keyboard="false"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="bioTitle">Bio</h5>
          </div>
          <div class="modal-body">
            <form id="bioForm">
              <div class="form-group">
                <p class="font-weight-light">
                  Any details such as occupation or city. <br />
                  Example: designer from San Francisco
                </p>
                <textarea maxlength="100" rows="3" class="form-control" id="bioTextArea"><%= user.bio %></textarea>
                <p class="characters-left-container">Characters left: <span class="characters-left">100</span></p>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              id="closeFormBio"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
            <button type="button" id="formBioButton" class="btn btn-primary">
              <span
                class="spinner spinner-border spinner-border-sm"
                role="status"
                aria-hidden="true"
                hidden
              ></span>
              <span class="status-text">Save</span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End of Change "Change bio" modal -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script
      src="https://kit.fontawesome.com/e307e9c374.js"
      crossorigin="anonymous"
    ></script>
    <script type="module" src="./javascript/settings/changeName.js"></script>
    <script type="module" src="./javascript/settings/changeBio.js"></script>
    <script src="./javascript/appearance/styles.js"></script>
  </body>
</html>
